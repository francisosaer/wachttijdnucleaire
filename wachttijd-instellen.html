<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wachttijd instellen</title>
<style>
body { font-family: Arial, sans-serif; padding:20px; max-width:400px; margin:auto; }
h1 { text-align:center; }
input, button { font-size:18px; padding:10px; margin-top:10px; width:100%; }
img { margin-top:15px; width:200px; height:200px; display:block; margin-left:auto; margin-right:auto; }
</style>
</head>
<body>

<h1>Wachttijd instellen</h1>

<label for="tijd">Terugkomtijd:</label>
<input type="time" id="tijd">

<button onclick="maakLink()">Genereer link</button>

<p>Patiëntlink (kopieer voor WhatsApp of QR-code):</p>
<input type="text" id="link" readonly>

<p>QR-code:</p>
<img id="qr" alt="QR-code verschijnt hier">

<script>
function maakLink() {
  const tijdInput = document.getElementById("tijd").value;
  if (!tijdInput) {
    alert("Vul een geldige tijd in");
    return;
  }

  const [u, m] = tijdInput.split(":").map(Number);

  const nu = new Date();
  let eindtijd = new Date(
    nu.getFullYear(), nu.getMonth(), nu.getDate(), u, m, 0
  ).getTime();

  // Als tijd al voorbij is vandaag, geef melding
  if (eindtijd < Date.now()) {
    alert("Deze tijd is al voorbij vandaag");
    return;
  }

  // URL genereren naar uw-wachttijd.html
  const url = window.location.origin +
    window.location.pathname.replace("wachttijd-instellen.html","") +
    "uw-wachttijd.html?end=" + eindtijd;

  // Link in tekstveld zetten
  document.getElementById("link").value = url;

  // QR-code genereren
  document.getElementById("qr").src =
    "https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=" +
    encodeURIComponent(url);
}
</script>

</body>
</html>